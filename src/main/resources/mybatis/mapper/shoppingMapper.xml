<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Shopping">
	
	<!-- 쇼핑 홈 출력 아이템 정보 -->
	<resultMap type="map" id="homeItem">
		<result column="name" property="name"/>
		<result column="company" property="company"/>
		<result column="price" property="price"/>
		<result column="path" property="path"/>
		<result column="renames" property="renames"/>
	</resultMap>

	<select id="selectHome" parameterType="string" resultMap="homeItem">
		select * from ( select rownum rnum, b.* from (
    		select * from product p, files f
    		where p.code = f.ref and p.sell = 1 and p.stock > 0
    		
    		and p.code like #{cate} || '%'
    		
    		order by substr(p.code,2) desc
		) b order by rnum ) t where rnum between 1 and 4
	</select>
</mapper>